<app-header></app-header>
<div class="container">
  <div class="row">
    <div class="col-10">
      <h1 *ngIf="!editingName">{{ luchador.name }}</h1>
      <button *ngIf="!editingName" class="btn btn-primary float-left align-bottom btn-edit" (click)="editName()">Edit Name</button>


      <form *ngIf="editingName" #nameForm="ngForm" (ngSubmit)="saveName()">
        <input name="titleEdit" #titleEdit="ngModel" *ngIf="editingName" class="title-edit" required minlength="3" maxlength="40"  (keydown)="nameInputChanged()" [(ngModel)]="editedName" placeholder="{{editedName}}">
        <button [disabled]="!nameForm.form.valid" type="submit" class="btn btn-primary float-left align-bottom btn-edit" >Save Name</button>
        <div *ngIf="renameErrorMessage && displayErrorMessage" class="alert alert-danger luchador-validate">
          {{renameErrorMessage}}
        </div>
        <div *ngIf="!nameForm.form.valid && titleEdit.errors.minlength" class="alert alert-danger luchador-validate">
          Luchador name must have at least 3 letters!
        </div>
      </form>
      <!-- <button class="btn btn-primary float-left align-bottom">Create Random Name</button>-->
    </div>
    <div class="col-2">
      <button
        *ngIf="dirty"
        class="btn btn-primary float-right align-bottom"
        (click)="save()"
      >
        Save
      </button>
    </div>
  </div>

  <div class="row">
    <div class="col-12"><hr /></div>
  </div>

  <div class="row">
    <div class="col-12">
      <ngb-tabset>
        <ngb-tab title="On Repeat">
          <ng-template ngbTabContent>
            <div>
              <app-code-editor
                [script]="codes.onRepeat.script"
                (onChange)="updateCode('onRepeat', $event)"
              ></app-code-editor>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab title="On Start">
          <ng-template ngbTabContent>
            <div>
              <app-code-editor
                [script]="codes.onStart.script"
                (onChange)="updateCode('onStart', $event)"
              ></app-code-editor>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab title="On Got Damage">
          <ng-template ngbTabContent>
            <div>
              <app-code-editor
                [script]="codes.onGotDamage.script"
                (onChange)="updateCode('onGotDamage', $event)"
              ></app-code-editor>
            </div>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="On Found">
          <ng-template ngbTabContent>
            <div>
              <app-code-editor
                [script]="codes.onFound.script"
                (onChange)="updateCode('onFound', $event)"
              ></app-code-editor>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab title="On Hit Other">
          <ng-template ngbTabContent>
            <div>
              <app-code-editor
                [script]="codes.onHitOther.script"
                (onChange)="updateCode('onHitOther', $event)"
              ></app-code-editor>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab title="On Hit Wall">
          <ng-template ngbTabContent>
            <div>
              <app-code-editor
                [script]="codes.onHitWall.script"
                (onChange)="updateCode('onHitWall', $event)"
              ></app-code-editor>
            </div>
          </ng-template>
        </ngb-tab>
      </ngb-tabset>
    </div>
  </div>

  <div class="row save-button">
    <div class="col-12">
      <ngb-alert
        class="success-message"
        *ngIf="successMessage"
        type="success"
        (close)="successMessage = null"
        >{{ successMessage }}</ngb-alert>
    </div>
  </div>
</div>
